# フォトブック管理アプリケーション - HTML版

**ダブルクリックで開けるスタンドアロンHTML**アプリケーションです。サーバー不要で、ブラウザだけで動作します。

## 特徴

- ✅ **サーバー不要**: HTMLファイルをダブルクリックで起動
- ✅ **インストール不要**: ブラウザだけで動作
- ✅ **完全ローカル**: すべての処理がブラウザ内で完結
- ✅ **EXIF対応**: 撮影日時を自動読み取り
- ✅ **リネームスクリプト生成**: バッチファイル(.bat/.sh)を自動生成

## 起動方法

### 1. HTMLファイルを開く

`web/index.html` をダブルクリック

または、ブラウザにドラッグ&ドロップ

### 2. 動作確認

モダンなブラウザ（Chrome, Firefox, Safari, Edge）で開いてください。

## 使い方

### 基本的な操作フロー

1. **「フォルダを開く」ボタンをクリック**
   - ファイル選択ダイアログでフォルダを選択
   - フォルダ内のすべての画像が読み込まれます

2. **画像を選択**
   - サムネイルをクリック（Ctrl+クリックで複数選択）
   - 「選択をバスケットに追加」ボタンをクリック

3. **ラベルを適用**
   - キーボードの数字キー（1-9）でラベルを適用
   - または右ペインのプリセットから選択

4. **順序調整**
   - バスケット内でアイテムを選択
   - 「▲ 上へ」「▼ 下へ」ボタンで並べ替え

5. **プレビュー**
   - テンプレートを設定（例: `V-{seq:1}_{label}`）
   - 「プレビュー」ボタンでリネーム結果を確認

6. **リネームスクリプト生成**
   - 「スクリプト生成」ボタンをクリック
   - `rename.bat`（Windows）と `rename.sh`（Mac/Linux）がダウンロードされます

7. **スクリプト実行**
   - ダウンロードしたスクリプトを**画像フォルダ内**にコピー
   - スクリプトを実行してリネーム

8. **JSON出力**
   - 「JSON出力」ボタンで画像情報をエクスポート
   - 自動的にJSONファイルがダウンロードされます

### キーボードショートカット

- **1-9キー**: 対応するラベルを適用（バスケット内の選択を優先）
- **Delete**: サムネイルグリッドの選択をクリア
- **Ctrl+クリック**: 複数選択

## 実装されている機能

### ✅ 利用可能な機能

- フォルダ選択（File API - webkitdirectory）
- サムネイル表示（FileReader API）
- EXIF情報読み取り（exif-js）
- 画像のソート（撮影日時、ファイル名）
- 複数選択（Ctrl+クリック）
- 選択バスケット
- 並べ替え（▲▼ボタン）
- ラベル付け（キーボードショートカット対応）
- リネームプレビュー
- **リネームスクリプト生成**（.bat/.sh）
- JSON出力
- ログ表示

### ⚠️ 制限事項

- **ファイルリネームの直接実行は不可**: ブラウザのセキュリティ制約により、ファイルを直接リネームできません
  - 代わりに、リネーム用のスクリプト（.bat/.sh）を生成してダウンロードします
  - ダウンロードしたスクリプトを画像フォルダ内で実行してください

- **Undo機能は不可**: リネームを直接実行しないため、Undo機能はありません
  - 必要に応じて、スクリプト実行前にファイルをバックアップしてください

## 技術スタック

- **HTML5 + CSS3**: モダンなUI
- **Vanilla JavaScript**: フレームワーク不要
- **File API**: フォルダ選択（webkitdirectory属性）
- **FileReader API**: サムネイル生成
- **exif-js**: EXIF情報読み取り（CDN）
- **Blob API**: ファイルダウンロード

## ファイル構成

```
web/
├── index.html    # スタンドアロンHTMLアプリ（すべて内包）
└── README.md     # このファイル
```

**すべての機能が1つのHTMLファイルに含まれています！**

## リネームスクリプトの使い方

### Windows（rename.bat）

1. `rename.bat` をダウンロード
2. **画像フォルダ内**にコピー
3. `rename.bat` をダブルクリックして実行
4. リネームが完了します

### Mac / Linux（rename.sh）

1. `rename.sh` をダウンロード
2. **画像フォルダ内**にコピー
3. ターミナルで実行:
   ```bash
   chmod +x rename.sh
   ./rename.sh
   ```
4. リネームが完了します

## デスクトップ版との違い

| 項目 | デスクトップ版 | HTML版 |
|------|---------------|-------|
| 起動方法 | `python main.py` | `index.html` をダブルクリック |
| 依存関係 | Python, PySide6など | ブラウザのみ |
| フォルダ選択 | ネイティブダイアログ | File API |
| EXIF読み取り | piexif, exifread | exif-js（CDN） |
| リネーム実行 | 直接実行可能 | スクリプト生成→手動実行 |
| Undo | ✅ 対応 | ❌ 不可 |

## ブラウザ互換性

以下のモダンブラウザで動作確認済み：

- ✅ Google Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Microsoft Edge 90+

**重要**: File API（webkitdirectory）をサポートしているブラウザが必要です。

## トラブルシューティング

### フォルダが選択できない

- モダンなブラウザを使用しているか確認してください
- ブラウザでJavaScriptが有効になっているか確認してください

### EXIF情報が取得できない

- インターネット接続を確認してください（exif-jsをCDNから読み込むため）
- オフラインで使用したい場合は、exif-jsをダウンロードしてHTMLに組み込んでください

### サムネイルが表示されない

- ブラウザのコンソールにエラーが出ていないか確認してください
- 画像形式が対応しているか確認（JPG, PNG, GIF, BMP, WebPなど）

### スクリプトが実行できない

- **Windows**: スクリプトを画像フォルダ内にコピーしてください
- **Mac/Linux**: 実行権限を付与してください（`chmod +x rename.sh`）

## セキュリティ

- **完全ローカル**: すべての処理がブラウザ内で完結
- **データ送信なし**: ファイルは外部に送信されません
- **CDN使用**: exif-jsのみCDN（jsdelivr.net）から読み込み
  - オフライン版が必要な場合は、exif-jsをダウンロードしてHTMLに組み込むことができます

## オフライン対応

exif-jsをローカルに含めてオフラインで使用する場合：

1. exif-jsをダウンロード: https://github.com/exif-js/exif-js
2. HTMLの`<script src="https://cdn.jsdelivr.net/npm/exif-js@2.3.0/exif.min.js"></script>`を削除
3. ダウンロードしたexif.jsの内容をHTMLの`<script>`タグ内に貼り付け

## ライセンス

このプロジェクトは内部利用を想定しています。

---

**作成日**: 2025-11-14
**バージョン**: 1.0 (HTML版)
